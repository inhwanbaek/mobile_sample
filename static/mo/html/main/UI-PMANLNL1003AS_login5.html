<!DOCTYPE html>
<html lang="ko">
  <head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <meta name="format-detection" content="telephone=no" />
    <link href="../../img/common/favicon.ico" rel="shrtcut icon" />
    <link href="../../img/common/favicon.png" rel="apple-touch-icon-precomposed" />
    <link rel="stylesheet" href="../../css/style.css" />

    <script src="../../js/jquery-3.4.1.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <script src="../../js/jquery.ui.touch-punch.js"></script>
    <script src="../../js/swiper.js"></script>

    <script src="../../js/ui.js"></script>
    <script src="../guide/html.js"></script>
    <!-- 개발페이지에서는 html.js 임포트 하지말아주세요. -->
  </head>
  <body class="body">
    <div class="wrap" id="wrap">
      <!-- 헤더-->
      <include class="header" id="header" src="../inc/header_mapp.html" data-include-opt='{"visible":"true","class":"is-gnb","title":""}'></include>
      <include class="gnb" src="../inc/gnb.html"></include>

      <!---- 바디 - 여기위로는 템플릿영역 ---->

      <main class="container page main app" id="container">
        <!-- 본문 영역 -->
        <div class="contents" id="contents">
          <!-- 특화영역 -->
          <section class="panel">
            <div class="psinfo">김교보님, 또 오셨네요!<i class="emoji a"></i></div>

            <div class="comp-keyword">
              <button type="button" class="item set">
                <span class="ut-hash-box">
                  <i class="ut-hash"># 보험</i>
                  <i class="ut-hash"># 건강</i>
                  <i class="ut-hash"># 최대다섯자</i>
                </span>
                <i class="cnt">+3</i>
              </button>
            </div>

            <article class="nudge opt-dark comp-bg-c300 first">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 카드 키워드는</span>
                  <span class="ut-hash"># 3개까지</span>
                  <span class="ut-hash"># 등록가능</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">내 보험료는 얼마일까?</p>
                    </div>
                    <div class="area-name">
                      <!-- <div class="txtblock">
										<span class="txt">나의 이름은 </span>
										<span class="ipbox"></span>
										<span class="txt">입니다.</span>
									</div> -->
                      <span><img src="../../img/main/img_flexible_field.png" alt="나의 이름은_입니다." /></span>
                    </div>
                  </div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="txt">교보생명 라이프 플래닛</span>
                </p>
              </a>
              <!-- //inner -->
              <button type="button" class="dot-menu" onclick="popSetting();"><span class="dot">메뉴</span></button>
            </article>

            <article class="nudge size-md comp-bg-c000">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">제휴콘텐츠 카드 유형 타이틀</p>
                      <p class="sub-title">편리하게 독서를 즐기세요.</p>
                    </div>
                  </div>
                  <div class="img-box"><img src="../../img/main/img_bg_pr.png" alt="" /></div>
                </div>
                <!-- //cont -->
              </a>
              <!-- //inner -->
            </article>

            <article class="nudge custom-row">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 추천도서</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">생활에 향기를 더하는<br />다양한 혜택과 정보가 가득</p>
                      <p class="sub-title">노후 걱정은 덜고 인생 여유는 더하고!</p>
                    </div>
                  </div>
                  <div class="img-box-sm"><img src="../../img/main/img_flexible_logo.png" alt="" /></div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="ci"><img src="../../img/main/ci_sinhan.png" alt="신한카드 로고" /></span>
                  <span class="txt">신한카드</span>
                </p>
              </a>
              <!-- //inner -->
            </article>

            <article class="nudge opt-dark comp-bg-c800">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 카드 키워드는</span>
                  <span class="ut-hash"># 3개까지</span>
                  <span class="ut-hash"># 등록가능</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">심장관련 질환을<br />폭넓게 보장</p>
                    </div>
                  </div>
                  <div class="img-box"><img src="../../img/main/img_bg_hand.png" alt="" /></div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="txt">교보생명 라이프 플래닛</span>
                </p>
              </a>
              <!-- //inner -->
              <button type="button" class="dot-menu" onclick="popSetting();"><span class="dot">메뉴</span></button>
            </article>

            <article class="nudge size-md comp-bg-c000">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">새로워진 교보생명을 만나보세요!</p>
                      <p class="sub-title">지금 새로워진 서비스를 경험하세요.</p>
                    </div>
                  </div>
                  <div class="img-box"><img src="../../img/main/img_bg_pr.png" alt="" /></div>
                </div>
                <!-- //cont -->
              </a>
              <!-- //inner -->
            </article>

            <article class="nudge">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 퇴직연금</span>
                  <span class="ut-hash"># 재테크</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">미래를 위한 보장 설계<br />변액연금보험</p>
                      <p class="sub-title">보장과 수익이 따라오는 변액종신보험</p>
                    </div>
                  </div>
                  <div class="img-box"><img class="img" src="../../img/main/ico_pd_01.png" alt="이미지" /></div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="txt">출처 / 링크있는 타입</span>
                </p>
              </a>
              <!-- //inner -->
              <button type="button" class="dot-menu" onclick="popSetting();"><span class="dot">메뉴</span></button>
            </article>

            <div class="dict-detailBanner opt-dark comp-bg-c1000">
              <button type="button" class="item">
                <span class="text">건강나이로 점쳐보는 노후, 1분이면</span>
                <span class="emoji">👌</span>
              </button>
            </div>

            <article class="nudge motive-k">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 평생보장</span>
                  <span class="ut-hash"># 노후자산</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">E-Book 서비스</p>
                      <p class="sub-title">편리하게 독서를 즐기세요.</p>
                    </div>
                  </div>
                  <div class="img-box"><img src="../../img/main/img_box_motive01.png" alt="" /></div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="txt">교보생명 라이프 플래닛</span>
                </p>
              </a>
              <!-- //inner -->
              <button type="button" class="dot-menu" onclick="popSetting();"><span class="dot">메뉴</span></button>
            </article>

            <article class="nudge motive-b">
              <!-- inner -->
              <a href="javascript:;" class="inner">
                <div class="ut-hash-box">
                  <span class="ut-hash"># 추천도서</span>
                </div>
                <!-- cont -->
                <div class="cont">
                  <div class="post">
                    <div class="heading">
                      <p class="title">미리 준비하는 평생 월급! 교보생명IRP</p>
                      <p class="sub-title">노후 걱정 덜고 인생여유는 더하고!</p>
                    </div>
                  </div>
                  <div class="img-box"><img src="../../img/main/img_box_motive02.png" alt="" /></div>
                </div>
                <!-- //cont -->
                <p class="origin">
                  <span class="txt">교보생명 라이프 플래닛</span>
                </p>
              </a>
              <!-- //inner -->
              <button type="button" class="dot-menu" onclick="popSetting();"><span class="dot">메뉴</span></button>
            </article>
          </section>
          <!-- // 특화영역 -->
        </div>
      </main>

      <!-- 개발시 레이어팝업 위치는 .container 바깥으로 넣어주세요 -->

      <!---- 바디 - 여기밑으로 템플릿영역 ---->

      
      <section class="my-deck-fake">
        <!-- data-ui-drag -->
        <button class="btn-hmb" data-ui-drag="true" title="열기">
          <i></i>
        </button>
        <!-- md-container-fake -->
        <div class="md-container">
          <div class="account-sum">
            <span class="tit">퇴직연금</span>
            <span class="won">
              <strong class="num">353,000</strong>
            </span>
          </div>
          <div class="btn-set">
            <button type="button" class="btn sm b">보험금납입</button>
            <button type="button" class="btn sm b">보험료청구</button>
            <button type="button" class="btn sm b">보험계약대출</button>
          </div>
        </div>
        <!-- //md-container-fake -->
      </section>
      <!-- //my-deck -->

      <!-- my-deck -->
      <section class="my-deck">
        <!-- data-ui-drag -->
        <button class="btn-hmb" data-ui-drag="true" title="열기">
          <i></i>
        </button>
        <!-- md-container -->
        <div class="md-container">
          <!-- md-cont -->
          <div class="md-cont">
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">보험 <strong>4</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd" checked>
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">보험료합계</span>
                  <span class="won">
                    <strong class="num">353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>보험료 납입</span></a>
                  <a href="#;" class="lnk"><span>보험금 청구</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- banner-box -->
            <div class="banner-box opt-arrow">
              <a href="#;" class="banner-item">
                <p class="tit">특약갱신 예정입니다.</p>
                <p class="txt">지금 확인해 보세요</p>
                <div class="imgBox"><img src="../../img/main/img_msca02.png" alt="" aria-hidden="true"></div>
              </a>
            </div>
            <!-- //banner-box -->
            <!-- banner-box -->
            <div class="banner-box opt-arrow">
              <a href="#;" class="banner-item">
                <p class="tit">지급 예정 보험금이 있습니다.</p>
                <p class="txt">지금 확인해 보세요</p>
                <div class="imgBox"><img src="../../img/main/img_msca03.png" alt="" aria-hidden="true"></div>
              </a>
            </div>
            <!-- //banner-box -->
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">퇴직연금 <strong>10</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd">
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">총 적립금액</span>
                  <span class="won">
                    <strong class="num">100,353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>투자상품 변경</span></a>
                  <a href="#;" class="lnk"><span>같이투자</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">보험계약대출 <strong>10</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd">
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">총 대출잔액</span>
                  <span class="won">
                    <strong class="num">100,353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>대출상환</span></a>
                  <a href="#;" class="lnk"><span>보험계약대출 신청</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">신용/담보대출 <strong>9,999</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd">
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">총 대출잔액</span>
                  <span class="won">
                    <strong class="num">100,353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>대출상환</span></a>
                  <a href="#;" class="lnk"><span>자동이체 신청변경</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">펀드 <strong>9,999</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd">
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">총 평가잔액</span>
                  <span class="won">
                    <strong class="num">100,353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>잔고좌수/수익률 조회</span></a>
                  <a href="#;" class="lnk"><span>신규가입 신청</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- prd-card -->
            <div class="prd-card">
              <div class="prd-setting">
                <span class="tit">신탁 <strong>10</strong>건</span>
                <label class="radio cr">
                  <input type="radio" name="radio-prd">
                  <span class="txt"><i>기본설정</i></span>
                </label>
              </div>
              <div class="prd-summary">
                <div class="account-sum">
                  <span class="tit">총 신탁잔고</span>
                  <span class="won">
                    <strong class="num">100,353,000</strong>
                  </span>
                </div>
                <div class="btn-set">
                  <a href="#;" class="lnk"><span>수익률 조회</span></a>
                  <a href="#;" class="lnk"><span>신규가입 신청</span></a>
                </div>
              </div>
            </div>
            <!-- //prd-card -->
            <!-- link-more -->
            <div class="link-more">
              <span class="txt">더 자세한 내용은 <a href="#;" class="lk">MY교보</a>에서<br> 확인하실 수 있습니다.</span> 
            </div>
            <!-- link-more -->
            <!-- banner-box -->
            <div class="banner-box opt-tall">
              <a href="#;" class="banner-item">
                <p class="tit">가입한 상품의<br />담당 FP를 확인해보세요</p>
                <p class="txt">나의 담당 컨설턴트</p>
                <div class="imgBox"><img src="../../img/main/img_ftservice.png" alt="" aria-hidden="true" /></div>
              </a>
            </div>
            <!-- //banner-box -->
          </div>
          <!-- //md-cont -->
          <!-- btn-deck-close -->
          <button class="btn-deck-close"><i>닫기</i></button>
        </div>
        <!-- //md-container -->

      </section>
      <!-- //my-deck -->

      <!-- dim -->
      <div class="my-dim">
        <div class="my-dim-nav">
          <a href="#;" class="my-dim-link">MY교보</a>
        </div>
      </div>
      <!-- dim -->

      <!-- 고정메뉴 -->
      <include class="floatnav" src="../inc/floatnav.html" data-include-opt='{"visible":"false","class":"is-qmenu"}'></include>

      <!-- 푸터 -->
      <include class="footer" src="../inc/footer.html" data-include-opt='{"visible":"true"}'></include>

      <style>
        /* html,body{
          width:100%; 
          height:100%;
          overflow: hidden !important;
        }
        .wrap{
          position:fixed;
          width:100%;
          height:100%;
          overflow:auto;
         -webkit-overflow-scrolling: touch;
        } */

        /* .wrap {
          height:100%;
          position:fixed;
          overflow:auto;
        }
        .wrap.is-lock {
          overflow:hidden;
        } */
        .container.page.main.app {
          height: auto !important;
        }
        html.is-lock {
          position: fixed;
          height: auto !important;
        }
        

        /* .wrap.is-lock {
          width:100%;
          height: calc(100 * var(--vh));
          overflow: hidden;
          -webkit-overflow-scrolling: touch;
        } */

      </style>

      <script>
        // 2022-07-11 매안페이지 개선
        document.onreadystatechange = function () {
          if (document.readyState == "interactive") {
            // outer
            const doc_html = document.querySelector('html');
            const doc_body = document.querySelector('body');
            const doc_wrap = document.querySelector('.wrap');

            const header_h = document.querySelector('.header').clientHeight;

            // my-dim
            const my_dim = document.querySelector('.my-dim');
            // my-deck
            const my_deck = document.querySelector('.my-deck');
            const my_deck_cont = document.querySelector('.my-deck .md-container');

            const my_close = document.querySelector('.my-deck .btn-deck-close');

            // my_ctrl
            const my_ctrl = document.querySelector('.my-deck [data-ui-drag]');
            const my_ctrl_h = my_ctrl.clientHeight;

            // my_fake
            const my_fake = document.querySelector('.my-deck-fake');
            const my_fake_ctrl = document.querySelector('.my-deck-fake [data-ui-drag]');
            const my_fake_h = my_fake.querySelector('.md-container').clientHeight;
            const my_fake_pos = my_fake_h + my_ctrl_h;

            // reset
            function my_deck_reset() {
              my_fake.style.setProperty('height', `${my_fake_pos}rem`);
              // my_fake.style.setProperty('height', `50rem`);

              my_deck.style.setProperty('height', `${my_fake_h}rem`);
              my_deck_cont.scrollTo({ top: 0, left: 0 });

              my_deck.classList.add('hide');

            }
            my_deck_reset();

            // scroll-lock
            function scroll_lock() {
              doc_html.classList.add("is-lock");
              doc_wrap.classList.add("is-lock");
            }
            function scroll_unlock() {
              doc_html.classList.remove("is-lock");
              doc_wrap.classList.remove("is-lock");
            }

            // transition
            function trans_none() { 
              my_fake.classList.add('on-touch');
              my_deck.classList.add('on-touch');
            }
            function trans_add() { 
              my_fake.classList.remove('on-touch');
              my_deck.classList.remove('on-touch');
            }
            

            // deck 제어
            let posInfo = {};
            // 터치 중 이동 시 필요 값 계산을 위한 함수
            const funcTouchUpdate = e => {
              // 현재 Y 확보
              posInfo.currentY = e.touches[0].clientY;

              // 시작과 현재 차이 계산
              posInfo.compareY = posInfo.startY - posInfo.currentY;

              if (posInfo.compareY > 1) {
                my_fake.style.setProperty('height', `${posInfo.fakeHeight - posInfo.compareY}rem`);
                my_deck.style.setProperty('height', `${posInfo.origHeight + posInfo.compareY}rem`);
              }
              if (posInfo.compareY < 1) {
                my_deck.classList.remove("active");
                my_deck.style.setProperty('height', `${posInfo.origHeight + posInfo.compareY}rem`);
                console.log(111)
              }
            }


            // my_fake
            my_fake.addEventListener('touchstart', function (e) {
              
              // 변수
              posInfo.startY = e.touches[0].clientY;
              posInfo.origHeight = my_deck.offsetHeight;
              posInfo.fakeHeight = my_fake.offsetHeight;

              // scroll-lock
              scroll_lock();
              // transition
              trans_none();

              my_fake.addEventListener('touchmove', funcTouchUpdate);

            });

            my_fake.addEventListener('touchend', function (e) {

              my_fake.removeEventListener('touchmove', funcTouchUpdate);

              // transition
              trans_add();

              if (posInfo.compareY > 100) {
                my_deck.style.setProperty('height', `calc(100% - ${header_h}rem)`);
                my_fake.style.setProperty('height', '0rem');
                my_deck.classList.add('active');
                my_deck.classList.remove("hide");
              } else {
                my_deck_reset();
                scroll_unlock();
              }
            });


            // my_deck
            my_ctrl.addEventListener('touchstart', function (e) {
              // 변수
              posInfo.startY = e.touches[0].clientY;
              posInfo.origHeight = my_deck.offsetHeight;
              posInfo.fakeHeight = my_fake.offsetHeight;

              // scroll-lock
              scroll_lock();

              // transition
              trans_none();

              my_ctrl.addEventListener('touchmove', funcTouchUpdate);

            });

            my_ctrl.addEventListener('touchend', function (e) {

              my_ctrl.removeEventListener('touchmove', funcTouchUpdate);

              // transition
              trans_add();

              if (posInfo.compareY > -100) {
                my_deck.classList.add("active");
                my_deck.style.setProperty("height", `calc(100% - ${header_h}rem)`);
              } else {
                my_deck_reset();
                scroll_unlock();

                my_deck.classList.remove("active");
              }
            });


            
 

            // clsoe
            my_close.addEventListener("click", function (e) {
              if (my_deck.classList.contains("active")) {
                scroll_unlock();

                my_deck.classList.remove("active");
                my_deck_reset();
              }
            });

            // scroll
            let fakeShowTick = 1000; // 스크롤 시 fake 숨긴 후 fakeShowTick 경과 시 재노출
            let fakeShow; // 비동기 처리 할당용 변수
            window.addEventListener('scroll', function (e) {
              // 스크롤 방향에 따른 숨김처리
              if (doc_body.classList.contains('is-scroll-up')) {
                my_fake.classList.remove('start');  
              } else if(doc_body.classList.contains('is-scroll-down')) {
                my_fake.classList.add('start'); 
              }

              let setHide = e => {
                fakeShow = setTimeout(e => {
                  my_fake.classList.remove('start');
                }, fakeShowTick);
              };
              // 중첩 동작 방지.
              clearTimeout(fakeShow);
              // 스크롤 종료 시점 한 번만 실행되도록 처리
              setHide();
            });


          }
        };
      </script>
    </div>
  </body>
</html>
